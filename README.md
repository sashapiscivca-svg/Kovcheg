# üì¶ Kovcheg (–ö–æ–≤—á–µ–≥)

**Kovcheg** ‚Äî —Ü–µ –∞–≤—Ç–æ–Ω–æ–º–Ω–∞, –æ—Ñ–ª–∞–π–Ω-–æ—Ä—ñ—î–Ω—Ç–æ–≤–∞–Ω–∞ RAG (Retrieval-Augmented Generation) —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞—Ö–∏—â–µ–Ω–∏—Ö –±–∞–∑ –∑–Ω–∞–Ω—å. –í–æ–Ω–∞ –¥–æ–∑–≤–æ–ª—è—î –ø–µ—Ä–µ—Ç–≤–æ—Ä–∏—Ç–∏ –∫–æ–ª–µ–∫—Ü—ñ—é —Ä–æ–∑—Ä—ñ–∑–Ω–µ–Ω–∏—Ö —Ñ–∞–π–ª—ñ–≤ (–¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤, –∫–æ–¥—É, –∑–æ–±—Ä–∞–∂–µ–Ω—å) —É —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω–∏–π, –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ—ñ—á–Ω–æ –ø—ñ–¥–ø–∏—Å–∞–Ω–∏–π –º–æ–¥—É–ª—å (`.ark`), —è–∫–∏–π –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –¥–ª—è —Å–µ–º–∞–Ω—Ç–∏—á–Ω–æ–≥–æ –ø–æ—à—É–∫—É —Ç–∞ —Å–ø—ñ–ª–∫—É–≤–∞–Ω–Ω—è –∑ LLM (Large Language Model).

–°–∏—Å—Ç–µ–º–∞ –ø–æ–±—É–¥–æ–≤–∞–Ω–∞ –Ω–∞–≤–∫–æ–ª–æ –∫–æ–Ω—Ü–µ–ø—Ü—ñ—ó "Trustless AI" ‚Äî –∫–æ–∂–µ–Ω –º–æ–¥—É–ª—å –∑–Ω–∞–Ω—å –º–∞—î —Ü–∏—Ñ—Ä–æ–≤–∏–π –ø—ñ–¥–ø–∏—Å, –∞ –≤—Å—è –æ–±—Ä–æ–±–∫–∞ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è –ª–æ–∫–∞–ª—å–Ω–æ.

## ‚ú® –ö–ª—é—á–æ–≤—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ (Code-based Analysis)

  * **üìÑ –í—Å–µ—ó–¥–Ω–∏–π "MonsterLoader"**:
      * –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ —à–∏—Ä–æ–∫–æ–≥–æ —Å–ø–µ–∫—Ç—Ä–∞ —Ñ–æ—Ä–º–∞—Ç—ñ–≤: PDF, DOCX, PPTX, XLSX, EPUB, HTML, Markdown, JSON, XML, CSV.
      * **–í–±—É–¥–æ–≤–∞–Ω–∏–π OCR**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ —Ä–æ–∑–ø—ñ–∑–Ω–∞–≤–∞–Ω–Ω—è —Ç–µ–∫—Å—Ç—É –∑ –∑–æ–±—Ä–∞–∂–µ–Ω—å (JPG, PNG, TIFF, WEBP, BMP) –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é Tesseract.
      * –í–∏—Ç—è–≥ —Ç–µ–∫—Å—Ç—ñ–≤ –Ω–∞–≤—ñ—Ç—å –∑—ñ —Å–∫–ª–∞–¥–Ω–∏—Ö PDF.
  * **üß† –õ–æ–∫–∞–ª—å–Ω–∏–π RAG Engine**:
      * –ì—ñ–±—Ä–∏–¥–Ω–∏–π –ø–æ—à—É–∫: –∫–æ–º–±—ñ–Ω–∞—Ü—ñ—è –≤–µ–∫—Ç–æ—Ä–Ω–æ–≥–æ –ø–æ—à—É–∫—É (Embeddings) —Ç–∞ –∫–ª—é—á–æ–≤–∏—Ö —Å–ª—ñ–≤.
      * –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î `SentenceTransformer` –¥–ª—è –µ–º–±–µ–¥–¥—ñ–Ω–≥—ñ–≤ —Ç–∞ –∫–≤–∞–Ω—Ç–æ–≤–∞–Ω—ñ GGUF –º–æ–¥–µ–ª—ñ (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º **Qwen 2.5 3B**) –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π.
      * –ü–æ—Ç–æ–∫–æ–≤–∞ (streaming) –ø–µ—Ä–µ–¥–∞—á–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π —É –≤–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å.
  * **üîí –ë–µ–∑–ø–µ–∫–∞ —Ç–∞ –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ—ñ—è**:
      * **–§–æ—Ä–º–∞—Ç .ark**: –í–ª–∞—Å–Ω–∏–π JSON-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, —â–æ –º—ñ—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç, –≤–µ–∫—Ç–æ—Ä–∏ —Ç–∞ –º–µ—Ç–∞–¥–∞–Ω—ñ.
      * **–ü—ñ–¥–ø–∏—Å Ed25519**: –ö–æ–∂–µ–Ω –º–æ–¥—É–ª—å –º–æ–∂–µ –±—É—Ç–∏ –ø—ñ–¥–ø–∏—Å–∞–Ω–∏–π –ø—Ä–∏–≤–∞—Ç–Ω–∏–º –∫–ª—é—á–µ–º –≤–∏–¥–∞–≤—Ü—è.
      * **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ü—ñ–ª—ñ—Å–Ω–æ—Å—Ç—ñ**: CLI —Ç–∞ Store –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å SHA-256 —Ö–µ—à –∫–æ–Ω—Ç–µ–Ω—Ç—É —Ç–∞ –≤–∞–ª—ñ–¥–Ω—ñ—Å—Ç—å –ø—ñ–¥–ø–∏—Å—É –ø–µ—Ä–µ–¥ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è–º.
      * **Trust Store**: –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –¥–æ–≤—ñ—Ä–µ–Ω–∏–º–∏ –≤–∏–¥–∞–≤—Ü—è–º–∏ (`trusted_publishers.json`).
  * **üï∏Ô∏è –í–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å (Web UI)**:
      * –°—É—á–∞—Å–Ω–∏–π SPA (Single Page Application) –∑ —Ç–µ–º–Ω–æ—é —Ç–µ–º–æ—é.
      * –Ü—Å—Ç–æ—Ä—ñ—è —á–∞—Ç—ñ–≤ (–∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –≤ SQLite).
      * –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤ "–Ω–∞ –ª—å–æ—Ç—É" –ø—Ä—è–º–æ –≤ —á–∞—Ç.
      * –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –¥–∂–µ—Ä–µ–ª (—Ü–∏—Ç—É–≤–∞–Ω—å) –¥–ª—è –∫–æ–∂–Ω–æ—ó –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ AI.

## üõ†Ô∏è –¢–µ—Ö–Ω—ñ—á–Ω–∏–π —Å—Ç–µ–∫

  * **Backend**: Python 3.11, FastAPI, Uvicorn.
  * **CLI**: Typer, Rich.
  * **AI/ML**: `sentence-transformers`, `llama-cpp-python` (–∑ –ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é OpenBLAS), `pytesseract`.
  * **Database**: SQLite (–¥–ª—è —ñ—Å—Ç–æ—Ä—ñ—ó —á–∞—Ç—ñ–≤), —Ñ–∞–π–ª–æ–≤–∞ —Å–∏—Å—Ç–µ–º–∞ (–¥–ª—è `.ark` –º–æ–¥—É–ª—ñ–≤).
  * **Frontend**: Vanilla JS + CSS (–±–µ–∑ –≤–∞–∂–∫–∏—Ö —Ñ—Ä–µ–π–º–≤–æ—Ä–∫—ñ–≤), –∞–¥–∞–ø—Ç–∏–≤–Ω–∏–π –¥–∏–∑–∞–π–Ω.
  * **Deployment**: Docker & Docker Compose.

## üöÄ –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

### 1\. –ü–æ–ø–µ—Ä–µ–¥–Ω—ñ –≤–∏–º–æ–≥–∏

–í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ñ **Docker** —Ç–∞ **Docker Compose**.

### 2\. –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

–ö–ª–æ–Ω—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π —Ç–∞ –ø—ñ–¥–≥–æ—Ç—É–π—Ç–µ —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ:

```bash
# –°—Ç–≤–æ—Ä—ñ—Ç—å –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó –¥–ª—è –º–∞—É–Ω—Ç–∏–Ω–≥—É –≤ Docker
mkdir -p data sources models_cache
```

### 3\. –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –º–æ–¥–µ–ª—ñ

–°–∏—Å—Ç–µ–º—ñ –ø–æ—Ç—Ä—ñ–±–Ω–∞ LLM –º–æ–¥–µ–ª—å —É —Ñ–æ—Ä–º–∞—Ç—ñ GGUF. –£ –∫–æ–¥—ñ (`download_model.py`) –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è **Qwen2.5-3B-Instruct**.

```bash
# –í–∏ –º–æ–∂–µ—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–∫—Ä–∏–ø—Ç –ª–æ–∫–∞–ª—å–Ω–æ –∞–±–æ —á–µ—Ä–µ–∑ –¥–æ–∫–µ—Ä (–¥–∏–≤. Dockerfile)
python3 download_model.py
# –ê–±–æ –∑–∞—á–µ–∫–∞–π—Ç–µ, –ø–æ–∫–∏ Docker –∑–±–µ—Ä–µ—Ç—å—Å—è (—Å–∫—Ä–∏–ø—Ç –≤—ñ–¥–ø—Ä–∞—Ü—é—î –ø—ñ–¥ —á–∞—Å –±—ñ–ª–¥–∞)
```

### 4\. –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker Compose

```bash
docker compose up -d --build
```

–°–µ—Ä–≤–µ—Ä –±—É–¥–µ –¥–æ—Å—Ç—É–ø–Ω–∏–π –∑–∞ –∞–¥—Ä–µ—Å–æ—é: `http://localhost:8000`

-----

## üìñ –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è (CLI Workflow)

–û—Å–Ω–æ–≤–Ω–∞ –≤–∑–∞—î–º–æ–¥—ñ—è –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è —á–µ—Ä–µ–∑ CLI —É—Ç–∏–ª—ñ—Ç—É `ark_engine`.

### –ï—Ç–∞–ø 1: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –º–æ–¥—É–ª—è –∑–Ω–∞–Ω—å (Build)

–ü–æ–∫–ª–∞–¥—ñ—Ç—å –≤–∞—à—ñ —Ñ–∞–π–ª–∏ (PDF, TXT, –∫–∞—Ä—Ç–∏–Ω–∫–∏ —Ç–æ—â–æ) —É –ø–∞–ø–∫—É `sources/`.

```bash
docker compose run --rm kovcheg python -m ark_engine.cli.main build \
    /app/sources \
    --output /app/data/my_knowledge.ark.json \
    --title "My Knowledge Base"
```

### –ï—Ç–∞–ø 2: –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –±–µ–∑–ø–µ–∫–æ—é (Sign & Trust) ‚Äî *–û–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ*

–Ø–∫—â–æ –≤–∏ —Ö–æ—á–µ—Ç–µ –∑–∞—Ö–∏—Å—Ç–∏—Ç–∏ –º–æ–¥—É–ª—å –≤—ñ–¥ –∑–º—ñ–Ω:

1.  **–ó–≥–µ–Ω–µ—Ä—É–π—Ç–µ –∫–ª—é—á—ñ:**
    ```bash
    docker compose run --rm kovcheg python -m ark_engine.cli.main keygen my_publisher_id
    ```
2.  **–ü—ñ–¥–ø–∏—à—ñ—Ç—å –º–æ–¥—É–ª—å:**
    ```bash
    docker compose run --rm kovcheg python -m ark_engine.cli.main sign \
        /app/data/my_knowledge.ark.json \
        --publisher my_publisher_id
    ```
3.  **–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ø—ñ–¥–ø–∏—Å:**
    ```bash
    docker compose run --rm kovcheg python -m ark_engine.cli.main verify \
        /app/data/my_knowledge.ark.json
    ```

### –ï—Ç–∞–ø 3: –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –≤ —Å—Ö–æ–≤–∏—â–µ (Store)

–©–æ–± –º–æ–¥—É–ª—å –∑'—è–≤–∏–≤—Å—è —É –í–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ñ –≤ —Ä–æ–∑–¥—ñ–ª—ñ "–ë–∞–∑–∞ –∑–Ω–∞–Ω—å", –π–æ–≥–æ —Ç—Ä–µ–±–∞ —ñ–Ω—Å—Ç–∞–ª—é–≤–∞—Ç–∏ —É –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ–π Store.

```bash
docker compose run --rm kovcheg python -m ark_engine.cli.main store install \
    /app/data/my_knowledge.ark.json
```

*(–Ø–∫—â–æ –º–æ–¥—É–ª—å –Ω–µ –ø—ñ–¥–ø–∏—Å–∞–Ω–∏–π –∞–±–æ –∫–ª—é—á –Ω–µ —î –¥–æ–≤—ñ—Ä–µ–Ω–∏–º, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –ø—Ä–∞–ø–æ—Ä–µ—Ü—å `--allow-untrusted`, —è–∫—â–æ —Ü–µ –ø–µ—Ä–µ–¥–±–∞—á–µ–Ω–æ –ª–æ–≥—ñ–∫–æ—é `installer.py`, –∞–±–æ –¥–æ–¥–∞–π—Ç–µ –∫–ª—é—á —É Trust Store).*

### –ï—Ç–∞–ø 4: –í–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å

1.  –í—ñ–¥–∫—Ä–∏–π—Ç–µ `http://localhost:8000`.
2.  –ü–µ—Ä–µ–π–¥—ñ—Ç—å –Ω–∞ –≤–∫–ª–∞–¥–∫—É "üì¶ –ë–∞–∑–∞ –∑–Ω–∞–Ω—å".
3.  –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **"–ê–∫—Ç–∏–≤—É–≤–∞—Ç–∏"** –Ω–∞ –ø–æ—Ç—Ä—ñ–±–Ω–æ–º—É –º–æ–¥—É–ª—ñ.
4.  –ü–æ—á–Ω—ñ—Ç—å —á–∞—Ç.

-----

## ‚öôÔ∏è –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è

–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑—á–∏—Ç—É—é—Ç—å—Å—è –∑—ñ –∑–º—ñ–Ω–Ω–∏—Ö —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ (–¥–∏–≤. `web_ui/backend/settings.py` —Ç–∞ `docker-compose.yml`):

| –ó–º—ñ–Ω–Ω–∞ | –û–ø–∏—Å | –î–µ—Ñ–æ–ª—Ç |
| :--- | :--- | :--- |
| `API_HOST` | –•–æ—Å—Ç –¥–ª—è –∑–∞–ø—É—Å–∫—É —Å–µ—Ä–≤–µ—Ä–∞ | `0.0.0.0` |
| `API_PORT` | –ü–æ—Ä—Ç API | `8000` |
| `ARK_MODULES_PATH` | –®–ª—è—Ö –¥–ª—è –ø–æ—à—É–∫—É `.ark` —Ñ–∞–π–ª—ñ–≤ | `/app/data` |

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

```text
.
‚îú‚îÄ‚îÄ ark_engine/             # –Ø–¥—Ä–æ —Å–∏—Å—Ç–µ–º–∏ (Python)
‚îÇ   ‚îú‚îÄ‚îÄ api/                # –°—Ç–∞—Ä–∏–π API (deprecated?)
‚îÇ   ‚îú‚îÄ‚îÄ cli/                # –ö–æ–º–∞–Ω–¥–∏ —Ç–µ—Ä–º—ñ–Ω–∞–ª—É (build, sign, store...)
‚îÇ   ‚îú‚îÄ‚îÄ core/               # –õ–æ–≥—ñ–∫–∞ RAG, Loader, Builder, Chunking
‚îÇ   ‚îú‚îÄ‚îÄ security/           # Ed25519 –ø—ñ–¥–ø–∏—Å–∏ —Ç–∞ –º–µ–Ω–µ–¥–∂–µ—Ä –∫–ª—é—á—ñ–≤
‚îÇ   ‚îú‚îÄ‚îÄ store/              # –õ–æ–∫–∞–ª—å–Ω–∏–π –º–µ–Ω–µ–¥–∂–µ—Ä –ø–∞–∫–µ—Ç—ñ–≤ (Install/Remove)
‚îÇ   ‚îî‚îÄ‚îÄ tests/              # –¢–µ—Å—Ç–∏ pytest
‚îú‚îÄ‚îÄ ark_format/             # –°—Ö–µ–º–∏ —Ç–∞ —Å–ø–µ—Ü–∏—Ñ—ñ–∫–∞—Ü—ñ—ó (.ark)
‚îú‚îÄ‚îÄ web_ui/                 # –í–µ–±-–¥–æ–¥–∞—Ç–æ–∫
‚îÇ   ‚îú‚îÄ‚îÄ backend/            # FastAPI —Ä–æ—É—Ç–µ—Ä–∏ (chat, modules, rag)
‚îÇ   ‚îî‚îÄ‚îÄ frontend/           # HTML/CSS/JS —Ñ–∞–π–ª–∏
‚îú‚îÄ‚îÄ data/                   # –ó–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω—ñ –º–æ–¥—É–ª—ñ —Ç–∞ –ë–î —á–∞—Ç—ñ–≤
‚îú‚îÄ‚îÄ sources/                # –í—Ö—ñ–¥–Ω—ñ —Ñ–∞–π–ª–∏ –¥–ª—è –æ–±—Ä–æ–±–∫–∏
‚îú‚îÄ‚îÄ models_cache/           # –ö–µ—à LLM –º–æ–¥–µ–ª–µ–π
‚îú‚îÄ‚îÄ Dockerfile              # –ó–±—ñ—Ä–∫–∞ –æ–±—Ä–∞–∑—É (–≤–∫–ª—é—á–∞—î Tesseract)
‚îî‚îÄ‚îÄ download_model.py       # –°–∫—Ä–∏–ø—Ç –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è Qwen2.5
```

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

–ü—Ä–æ–µ–∫—Ç –º—ñ—Å—Ç–∏—Ç—å –Ω–∞–±—ñ—Ä —Ç–µ—Å—Ç—ñ–≤ –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —è–¥—Ä–∞ —Ç–∞ API.

```bash
docker compose run --rm kovcheg pytest ark_engine/tests/
# –∞–±–æ –¥–ª—è —Ç–µ—Å—Ç—ñ–≤ UI API
docker compose run --rm kovcheg pytest web_ui/tests/
```
