# üîß –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–∞ –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Kovcheg

–¶–µ–π –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—É—î –ø—Ä–æ—Ü–µ—Å —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è —Å–∏—Å—Ç–µ–º–∏ **Kovcheg**. –ü—Ä–æ–µ–∫—Ç –æ–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–∏–π –¥–ª—è —Ä–æ–±–æ—Ç–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–∑–æ–≤–∞–Ω–æ–º—É —Å–µ—Ä–µ–¥–æ–≤–∏—â—ñ (Docker), –∞–ª–µ —Ç–∞–∫–æ–∂ –ø—ñ–¥—Ç—Ä–∏–º—É—î –ª–æ–∫–∞–ª—å–Ω–µ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –¥–ª—è —Ä–æ–∑—Ä–æ–±–∫–∏ ("Bare Metal").

## üìã –ü–æ–ø–µ—Ä–µ–¥–Ω—ñ –≤–∏–º–æ–≥–∏

–ü–µ—Ä–µ–¥ –ø–æ—á–∞—Ç–∫–æ–º –ø–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ —É –≤–∞—Å –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ:

  * **Docker** (–≤–µ—Ä—Å—ñ—è 20.10+)
  * **Docker Compose** (–≤–µ—Ä—Å—ñ—è 2.0+)
  * **Python 3.11+** (—Ç—ñ–ª—å–∫–∏ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫—É –±–µ–∑ Docker)
  * **\~5 GB** –≤—ñ–ª—å–Ω–æ–≥–æ –º—ñ—Å—Ü—è –Ω–∞ –¥–∏—Å–∫—É (–¥–ª—è –º–æ–¥–µ–ª—ñ Qwen2.5-3B —Ç–∞ —Å–∏—Å—Ç–µ–º–Ω–∏—Ö –±—ñ–±–ª—ñ–æ—Ç–µ–∫)

-----

## üê≥ –°–ø–æ—Å—ñ–± 1: Docker (–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)

–¶–µ –Ω–∞–π—à–≤–∏–¥—à–∏–π —Å–ø–æ—Å—ñ–± –∑–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–∏—Å—Ç–µ–º—É –∑ —É—Å—ñ–º–∞ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—è–º–∏ (OCR, BLAS –ø—Ä–∏—Å–∫–æ—Ä–µ–Ω–Ω—è, –±–∞–∑–∏ –¥–∞–Ω–∏—Ö).

### 1\. –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ–π

–ó–≥—ñ–¥–Ω–æ –∑ `docker-compose.yml`, —Å–∏—Å—Ç–µ–º–∞ –ø–æ—Ç—Ä–µ–±—É—î –º–æ–Ω—Ç—É–≤–∞–Ω–Ω—è –ª–æ–∫–∞–ª—å–Ω–∏—Ö –ø–∞–ø–æ–∫ –¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Å—Ç–∞–Ω—É. –°—Ç–≤–æ—Ä—ñ—Ç—å —ó—Ö —É –∫–æ—Ä–µ–Ω—ñ –ø—Ä–æ–µ–∫—Ç—É:

```bash
mkdir -p data sources models_cache
```

  * `sources/`: –°—é–¥–∏ –≤–∏ –±—É–¥–µ—Ç–µ –∫–ª–∞—Å—Ç–∏ –≤—Ö—ñ–¥–Ω—ñ —Ñ–∞–π–ª–∏ (PDF, DOCX, –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è).
  * `data/`: –¢—É—Ç –∑–±–µ—Ä—ñ–≥–∞—Ç–∏–º—É—Ç—å—Å—è –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω—ñ `.ark` –º–æ–¥—É–ª—ñ —Ç–∞ –±–∞–∑–∞ —á–∞—Ç—ñ–≤ (`chat_history.db`).
  * `models_cache/`: –ú—ñ—Å—Ü–µ –¥–ª—è GGUF —Ñ–∞–π–ª—É LLM –º–æ–¥–µ–ª—ñ.

### 2\. –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è AI –ú–æ–¥–µ–ª—ñ

–°–∏—Å—Ç–µ–º–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –º–æ–¥–µ–ª—å **Qwen 2.5 3B Instruct**. –í–∏–∫–æ–Ω–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –∑–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞—á–∞:

```bash
# –Ø–∫—â–æ —É –≤–∞—Å —î –ª–æ–∫–∞–ª—å–Ω–∏–π Python
python3 download_model.py

# –ê–ë–û –≤—Ä—É—á–Ω—É –∑–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ —Ñ–∞–π–ª —É –ø–∞–ø–∫—É models_cache:
# URL: https://huggingface.co/bartowski/Qwen2.5-3B-Instruct-GGUF/resolve/main/Qwen2.5-3B-Instruct-Q4_K_M.gguf
# –ü–µ—Ä–µ–π–º–µ–Ω—É–π—Ç–µ –π–æ–≥–æ –≤: qwen2.5-3b-instruct.gguf
```

### 3\. –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

–í–∏–∫–æ–Ω–∞–π—Ç–µ –∑–±—ñ—Ä–∫—É —Ç–∞ –∑–∞–ø—É—Å–∫. `Dockerfile` –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `tesseract-ocr` —Ç–∞ —Å–∫–æ–º–ø—ñ–ª—é—î `llama-cpp-python` –∑ –ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é OpenBLAS.

```bash
docker compose up -d --build
```

–ü—ñ—Å–ª—è –∑–∞–ø—É—Å–∫—É:

  * **Web UI**: `http://localhost:8000`
  * **API Docs**: `http://localhost:8000/docs`

-----

## üêç –°–ø–æ—Å—ñ–± 2: –õ–æ–∫–∞–ª—å–Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è (Development)

–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ —Ü–µ–π –º–µ—Ç–æ–¥, —è–∫—â–æ –≤–∏ –ø–ª–∞–Ω—É—î—Ç–µ –∑–º—ñ–Ω—é–≤–∞—Ç–∏ –∫–æ–¥ `ark_engine`.

### 1\. –°–∏—Å—Ç–µ–º–Ω—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ

`Dockerfile` –≤–∫–∞–∑—É—î –Ω–∞ –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ—Å—Ç—å –Ω–∞—Å—Ç—É–ø–Ω–∏—Ö —Å–∏—Å—Ç–µ–º–Ω–∏—Ö –ø–∞–∫–µ—Ç—ñ–≤ (–¥–ª—è Ubuntu/Debian):

```bash
sudo apt-get update && sudo apt-get install -y \
    python3.11 python3.11-venv \
    tesseract-ocr \
    tesseract-ocr-ukr \
    libmagic1 \
    build-essential \
    cmake \
    libopenblas-dev
```

> **–ü—Ä–∏–º—ñ—Ç–∫–∞:** `tesseract-ocr-ukr` –∫—Ä–∏—Ç–∏—á–Ω–æ –≤–∞–∂–ª–∏–≤–∏–π –¥–ª—è —Ä–æ–∑–ø—ñ–∑–Ω–∞–≤–∞–Ω–Ω—è —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ–≥–æ —Ç–µ–∫—Å—Ç—É –Ω–∞ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è—Ö.

### 2\. Virtual Environment

```bash
python3.11 -m venv venv
source venv/bin/activate
```

### 3\. –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è Python –ø–∞–∫–µ—Ç—ñ–≤

–í–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ —Å–∫–æ–º–ø—ñ–ª—é–≤–∞—Ç–∏ `llama-cpp-python` –∑ –ø—Ä–∞–ø–æ—Ä—Ü—è–º–∏ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó, —è–∫ —Ü–µ –∑—Ä–æ–±–ª–µ–Ω–æ –≤ Dockerfile:

```bash
pip install --upgrade pip

# –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑ Hardware Acceleration (CPU/OpenBLAS)
CMAKE_ARGS="-DLLAMA_BLAS=ON -DLLAMA_OPENBLAS=ON" pip install --no-cache-dir -r requirements.txt
```

### 4\. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —à–ª—è—Ö—ñ–≤

–°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª `.env` –∞–±–æ –µ–∫—Å–ø–æ—Ä—Ç—É–π—Ç–µ –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –≤–æ–Ω–∏ –≤–∫–∞–∑–∞–Ω—ñ –≤ `web_ui/backend/settings.py`):

```bash
export ARK_MODULES_PATH="./data"
export API_HOST="0.0.0.0"
export API_PORT=8000
```

### 5\. –ó–∞–ø—É—Å–∫

```bash
# –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –º–æ–¥–µ–ª—å (—è–∫—â–æ —â–µ –Ω–µ –∑—Ä–æ–±–∏–ª–∏)
python download_model.py

# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ Web UI
python -m ark_engine.cli.main web
```

-----

## ‚öôÔ∏è –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—Ä–∞—Ü–µ–∑–¥–∞—Ç–Ω–æ—Å—Ç—ñ

–©–æ–± –ø–µ—Ä–µ–∫–æ–Ω–∞—Ç–∏—Å—è, —â–æ —ñ–Ω—Å—Ç–∞–ª—è—Ü—ñ—è –ø—Ä–æ–π—à–ª–∞ —É—Å–ø—ñ—à–Ω–æ, –≤–∏–∫–æ–Ω–∞–π—Ç–µ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É —á–µ—Ä–µ–∑ CLI:

**1. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –∫–ª—é—á—ñ–≤ (Security):**

```bash
# –ì–µ–Ω–µ—Ä—É—î –ø–∞—Ä—É Ed25519 –∫–ª—é—á—ñ–≤ —É ~/.kovcheg/security/keys/
docker compose run --rm kovcheg python -m ark_engine.cli.main keygen test_publisher
```

**2. –¢–µ—Å—Ç–æ–≤–∞ –∑–±—ñ—Ä–∫–∞ –º–æ–¥—É–ª—è:**
–ü–æ–∫–ª–∞–¥—ñ—Ç—å –±—É–¥—å-—è–∫–∏–π —Ç–µ–∫—Å—Ç–æ–≤–∏–π —Ñ–∞–π–ª —É `sources/` —ñ –≤–∏–∫–æ–Ω–∞–π—Ç–µ:

```bash
docker compose run --rm kovcheg python -m ark_engine.cli.main build \
  /app/sources \
  --output /app/data/test.ark.json \
  --title "Test Build"
```

–Ø–∫—â–æ —Ñ–∞–π–ª `/app/data/test.ark.json` –∑'—è–≤–∏–≤—Å—è, —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–∞—Ü—é—î –∫–æ—Ä–µ–∫—Ç–Ω–æ.

-----

## üêõ Troubleshooting

**–ü–æ–º–∏–ª–∫–∞: `AttributeError: 'Llama' object has no attribute...`**

  * **–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ—Å–ø—ñ–≤–ø–∞–¥—ñ–Ω–Ω—è –≤–µ—Ä—Å—ñ–π `llama-cpp-python`.
  * **–†—ñ—à–µ–Ω–Ω—è:** –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –≤–µ—Ä—Å—ñ—é `0.2.90`, —è–∫ –≤–∫–∞–∑–∞–Ω–æ –≤ `requirements.txt`.

**–ü–æ–º–∏–ª–∫–∞: `TesseractNotFoundError`**

  * **–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –±—ñ–Ω–∞—Ä–Ω–∏–π —Ñ–∞–π–ª tesseract —É —Å–∏—Å—Ç–µ–º—ñ.
  * **–†—ñ—à–µ–Ω–Ω—è:** –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è `tesseract-ocr` (–ö—Ä–æ–∫ 1 –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫—É).

**–ü–æ–º–∏–ª–∫–∞: `Model not found`**

  * **–ü—Ä–∏—á–∏–Ω–∞:** –°–∫—Ä–∏–ø—Ç `download_model.py` –Ω–µ –≤—ñ–¥–ø—Ä–∞—Ü—é–≤–∞–≤ –∞–±–æ –ø–∞–ø–∫–∞ `models_cache` –ø–æ—Ä–æ–∂–Ω—è.
  * **–†—ñ—à–µ–Ω–Ω—è:** –ó–∞–ø—É—Å—Ç—ñ—Ç—å `python download_model.py` –≤—Ä—É—á–Ω—É.
